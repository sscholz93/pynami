<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pynami.nami &mdash; pynami 0.3.2 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            pynami
          </a>
              <div class="version">
                0.3.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../namiclass.html">Main class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../constants.html">Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../urls.html">REST URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../search_mitglieder.html">Search Mitglieder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">pynami</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">pynami.nami</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for pynami.nami</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">NAMI library in python</span>

<span class="sd">This module contains the main class :class:`NaMi` and a few simple exception</span>
<span class="sd">definitions.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">.constants</span> <span class="kn">import</span> <span class="n">URLS</span><span class="p">,</span> <span class="n">DEFAULT_PARAMS</span>
<span class="kn">from</span> <span class="nn">.schemas.activity</span> <span class="kn">import</span> <span class="n">SearchActivitySchema</span><span class="p">,</span> <span class="n">ActivitySchema</span>
<span class="kn">from</span> <span class="nn">.schemas.cogc</span> <span class="kn">import</span> <span class="n">SearchBescheinigungSchema</span><span class="p">,</span> <span class="n">BescheinigungSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.dashboard</span> <span class="kn">import</span> <span class="n">NotificationSchema</span><span class="p">,</span> <span class="n">StatsSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.default</span> <span class="kn">import</span> <span class="n">BaseadminSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.grpadmin</span> <span class="kn">import</span> <span class="n">SearchInvoiceSchema</span><span class="p">,</span> <span class="n">InvoiceSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.history</span> <span class="kn">import</span> <span class="n">HistoryEntrySchema</span><span class="p">,</span> <span class="n">MitgliedHistorySchema</span>
<span class="kn">from</span> <span class="nn">.schemas.mgl</span> <span class="kn">import</span> <span class="n">SearchMitgliedSchema</span><span class="p">,</span> <span class="n">MitgliedSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.search</span> <span class="kn">import</span> <span class="n">SearchSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.training</span> <span class="kn">import</span> <span class="n">SearchAusbildungSchema</span><span class="p">,</span> <span class="n">AusbildungSchema</span>
<span class="kn">from</span> <span class="nn">.schemas.tags</span> <span class="kn">import</span> <span class="n">TagSchema</span><span class="p">,</span> <span class="n">SearchTagSchema</span>
<span class="kn">from</span> <span class="nn">.util</span> <span class="kn">import</span> <span class="n">open_download_pdf</span>
<span class="kn">from</span> <span class="nn">.tools</span> <span class="kn">import</span> <span class="n">tabulate2x</span>


<div class="viewcode-block" id="NamiResponseTypeError"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NamiResponseTypeError">[docs]</a><span class="k">class</span> <span class="nc">NamiResponseTypeError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is raised when the response type from the |NAMI| is not in list of</span>
<span class="sd">    allowed values or more specifically when the |NAMI| returns an error, a</span>
<span class="sd">    warning or an exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="NamiResponseSuccessError"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NamiResponseSuccessError">[docs]</a><span class="k">class</span> <span class="nc">NamiResponseSuccessError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is being raised when the response &#39;success&#39; field is not :data:`True`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="NamiHTTPError"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NamiHTTPError">[docs]</a><span class="k">class</span> <span class="nc">NamiHTTPError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised when the HTTP status code was not as expected!&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="NaMi"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi">[docs]</a><span class="k">class</span> <span class="nc">NaMi</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main class for communication with the |DPSG| |NAMI|</span>

<span class="sd">    Example:</span>
<span class="sd">        .. code-block:: python</span>
<span class="sd">            :caption: Connect to the |NAMI|, search for all active members</span>
<span class="sd">                      and print them in a tabulated form.</span>

<span class="sd">            from pynami.nami import NaMi</span>
<span class="sd">            from pynami.tools import tabulate2x</span>

<span class="sd">            with NaMi(username=&#39;MITGLIEDSNUMMER&#39;, password=&#39;PASSWORD&#39;) as nami:</span>
<span class="sd">                print(tabulate2x(nami.search()))</span>

<span class="sd">    Args:</span>
<span class="sd">        config (:obj:`dict`, optional): Authorization configuration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__config</span> <span class="o">=</span> <span class="n">config</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;dict: Contains authorization information and after that a few ids&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="NaMi._check_response"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi._check_response">[docs]</a>    <span class="k">def</span> <span class="nf">_check_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check a requests response object if the |NAMI| response looks ok.</span>
<span class="sd">        This currently checks some very basic things.</span>

<span class="sd">        Raises:</span>
<span class="sd">            NamiHTTPError: When |HTTP| communication failes</span>
<span class="sd">            NamiResponseSuccessError: When the |NAMI| returns an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NamiHTTPError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;HTTP Error. Status Code: &#39;</span>
                                <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;application/pdf&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span>
        <span class="n">rjson</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;success&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">NamiResponseSuccessError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;success state from NAMI was &quot;</span>
                                           <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">rjson</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># allowed response types are: OK, INFO, WARN, ERROR, EXCEPTION</span>
        <span class="k">if</span> <span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;responseType&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;OK&#39;</span><span class="p">,</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">NamiResponseTypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;responseType&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: &quot;</span>
                                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rjson</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span></div>


<div class="viewcode-block" id="NaMi.auth"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.auth">[docs]</a>    <span class="k">def</span> <span class="nf">auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Authenticate against the |NAMI| |API|. This stores the jsessionId</span>
<span class="sd">        cookie in the requests session. Therefore this needs to be called only</span>
<span class="sd">        once.</span>

<span class="sd">        This also stores your id (not the Mitgliednummer) for later pruposes.</span>

<span class="sd">        Args:</span>
<span class="sd">            username (:obj:`str`, optional): The |NAMI| username. Which is your</span>
<span class="sd">                Mitgliedsnummer</span>
<span class="sd">            password (:obj:`str`, optional): Your NAMI password</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`requests.Session`: The requests session, including the</span>
<span class="sd">            auth cookie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="n">username</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
            <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">]</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;Login&#39;</span><span class="p">:</span> <span class="s1">&#39;API&#39;</span><span class="p">,</span>
            <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
            <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span>
        <span class="p">}</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;AUTH&#39;</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Authentication failed!&#39;</span><span class="p">)</span>

        <span class="c1"># Get the id of the user</span>
        <span class="n">myself</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">mitgliedsNummer</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">myself</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myself</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">myself</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">gruppierungId</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Received </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">myself</span><span class="p">)</span><span class="si">}</span><span class="s1"> search results while &#39;</span>
                             <span class="sa">f</span><span class="s1">&#39;searching for myself!&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span></div>

    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="NaMi.logout"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.logout">[docs]</a>    <span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This should be called at the end of the communication. It is called</span>
<span class="sd">        when exiting through the :meth:`~contextmnager.__exit__` method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;LOGOUT&#39;</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">204</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception_type</span><span class="p">,</span> <span class="n">exception_value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logout</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">NamiHTTPError</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;NamiHTTPError during logout: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">exception_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

<div class="viewcode-block" id="NaMi._get_baseadmin"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi._get_baseadmin">[docs]</a>    <span class="k">def</span> <span class="nf">_get_baseadmin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">taetigkeitId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                       <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Base function for retrieving all core lists from the |NAMI|</span>

<span class="sd">        Args:</span>
<span class="sd">            key (:obj:`str`): Name of the wanted items</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>
<span class="sd">            taetigkeitId (:obj:`int`, optional): Id of an activity. A list of</span>
<span class="sd">                all possible ids can be found in the section</span>
<span class="sd">                :ref:`tables/activitytypes:Activity types`. This is only</span>
<span class="sd">                required for the URLs which needs to be formatted with this</span>
<span class="sd">                value.</span>

<span class="sd">        Keyword Args:</span>
<span class="sd">            gruppierung (:obj:`int` or :obj:`str`, optional): Group id, in case</span>
<span class="sd">                this differs from the group id in the |URL| (given by</span>
<span class="sd">                ``grpId``)</span>
<span class="sd">            mitglied (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer). This overwrites ``mglId``.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: The returned</span>
<span class="sd">            default values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">grpId</span><span class="p">:</span>
            <span class="n">grpId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grpId</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">()]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grpId</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">grpId</span><span class="p">),</span>
                                       <span class="n">taetigkeitId</span><span class="o">=</span><span class="n">taetigkeitId</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;gruppierung&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">grpId</span><span class="p">),</span>
                  <span class="s1">&#39;mitglied&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">mglId</span><span class="p">)</span> <span class="k">if</span> <span class="n">mglId</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">myId</span><span class="p">,</span>
                  <span class="s1">&#39;page&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                  <span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">}</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">BaseadminSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grpId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Group id of the user</span>

<span class="sd">        Returns:</span>
<span class="sd">            int</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">myId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        |NAMI| internal id of the user</span>

<span class="sd">        Returns:</span>
<span class="sd">            int</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

<div class="viewcode-block" id="NaMi.countries"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.countries">[docs]</a>    <span class="k">def</span> <span class="nf">countries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: List of all</span>
<span class="sd">            possible countries with their names and ids</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Land&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.regionen"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.regionen">[docs]</a>    <span class="k">def</span> <span class="nf">regionen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: All possible</span>
<span class="sd">            Bundeslaender&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Region&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.zahlungskonditionen"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.zahlungskonditionen">[docs]</a>    <span class="k">def</span> <span class="nf">zahlungskonditionen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: Every paying</span>
<span class="sd">            method (either bank transfer or debit)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Zahlungskondition&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.beitragsarten_mgl"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.beitragsarten_mgl">[docs]</a>    <span class="k">def</span> <span class="nf">beitragsarten_mgl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: Each possible</span>
<span class="sd">            fee for a member&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Beitragsart_mgl&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.beitragsarten"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.beitragsarten">[docs]</a>    <span class="k">def</span> <span class="nf">beitragsarten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: Each possible</span>
<span class="sd">            fee type&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Beitragsart&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.geschlechter"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.geschlechter">[docs]</a>    <span class="k">def</span> <span class="nf">geschlechter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: You can choose</span>
<span class="sd">            between three genders: male, female and diverse.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Geschlecht&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.staaten"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.staaten">[docs]</a>    <span class="k">def</span> <span class="nf">staaten</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: A quite long</span>
<span class="sd">            list of different nationalities&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Staat&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.konfessionen"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.konfessionen">[docs]</a>    <span class="k">def</span> <span class="nf">konfessionen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: All</span>
<span class="sd">            denominations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Konfession&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.mgltypes"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.mgltypes">[docs]</a>    <span class="k">def</span> <span class="nf">mgltypes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get default values</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`, optional): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`, optional): Member id (not the</span>
<span class="sd">                  |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: You can have one</span>
<span class="sd">            of three different member types&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;MglType&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: If you are</span>
<span class="sd">        active, inactiv or already deleted&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Status_List&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tagList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: A different</span>
<span class="sd">        list of fee types but with basically the same content. This one is</span>
<span class="sd">        used for searching members.</span>

<span class="sd">        .. deprecated:: 0.3.3</span>
<span class="sd">            Only returns an empty list and has therefore become useless.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;TagList&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bausteine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Choose |DPSG|</span>
<span class="sd">        training parts&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Baustein&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subdivision</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Which division</span>
<span class="sd">        you are associated with. This one is only used for searching.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Untergliederung&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">activities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Functional</span>
<span class="sd">        activities&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Alle_Taetigkeiten&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ebenen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Structural</span>
<span class="sd">        layersin the |DPSG|&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Ebene&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ebene1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: You can choose</span>
<span class="sd">        a Diözese which you belong to.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Ebene1&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gruppierungen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Choose from a</span>
<span class="sd">        list of groups that you are associated with for member admin&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Gruppierungen&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grpadmin_grps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;:obj:`list` of :class:`~.schemas.default.Baseadmin`: Choose from a</span>
<span class="sd">        list of groups that you are associated with for group admin&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;grpadmin_grps&#39;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :class:`~.schemas.dashboard.Stats`: Contains counts from different</span>
<span class="sd">        tiers. The actual list of :class:`~.schemas.dashboard.StatCategory` is</span>
<span class="sd">        in the :attr:`~.schemas.dashboard.StatsSchema.statsCategories`</span>
<span class="sd">        attribute.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;STATS&#39;</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">StatsSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span>

<div class="viewcode-block" id="NaMi.notifications"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.notifications">[docs]</a>    <span class="k">def</span> <span class="nf">notifications</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sortproperty</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortdirection</span><span class="o">=</span><span class="s1">&#39;ASC&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dashboard function</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.dashboard.Notification`: All</span>
<span class="sd">            current notifications (like tier changes of members). In the |NAMI|</span>
<span class="sd">            these are displayed in the dashboard.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;NOTIFICATIONS&#39;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="k">if</span> <span class="n">sortproperty</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;sort&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([{</span><span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="n">sortproperty</span><span class="p">,</span>
                                          <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="n">sortdirection</span><span class="p">}],</span>
                                        <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">))</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">NotificationSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.history"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.history">[docs]</a>    <span class="k">def</span> <span class="nf">history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dashboard function</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.history.HistoryEntry`: Last</span>
<span class="sd">            editing events like updating and creating members.In the |NAMI|</span>
<span class="sd">            these are displayed in the dashboard.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;HISTORY&#39;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HistoryEntrySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.ebene2"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.ebene2">[docs]</a>    <span class="k">def</span> <span class="nf">ebene2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebene1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        You can choose a Bezirk which you belong to.</span>

<span class="sd">        Args:</span>
<span class="sd">            ebene1 (int): Group id of a Diözese</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: List of</span>
<span class="sd">            possible Bezirken you are associated with&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Ebene2&#39;</span><span class="p">,</span> <span class="n">ebene1</span><span class="p">,</span>
                                   <span class="n">gruppierung</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="NaMi.ebene3"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.ebene3">[docs]</a>    <span class="k">def</span> <span class="nf">ebene3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ebene2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        You can choose a Stamm which you belong to.</span>

<span class="sd">        Args:</span>
<span class="sd">            ebene2 (int): Group id of a Bezirk</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.default.Baseadmin`: List of</span>
<span class="sd">            possible Stämmen you are associated with&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;Ebene3&#39;</span><span class="p">,</span> <span class="n">ebene2</span><span class="p">,</span>
                                   <span class="n">gruppierung</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="NaMi.invoices"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.invoices">[docs]</a>    <span class="k">def</span> <span class="nf">invoices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of all invoices of a group</span>

<span class="sd">        Args:</span>
<span class="sd">            groupId (:obj:`int`, optional): Group id</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.grpadmin.SearchInvoice`: All invoices of</span>
<span class="sd">            the specified group</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">groupId</span><span class="p">:</span>
            <span class="n">groupId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">]</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;INVOICE&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">groupId</span><span class="si">}</span><span class="s2">/flist&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchInvoiceSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.invoice"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.invoice">[docs]</a>    <span class="k">def</span> <span class="nf">invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupId</span><span class="p">,</span> <span class="n">invId</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an invoice by its id.</span>

<span class="sd">        Args:</span>
<span class="sd">            groupId (int): Group id</span>
<span class="sd">            invId (int): Id of the invoice. This will probably originate from</span>
<span class="sd">                a search result, e.g. by calling :meth:`invoices`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.grpadmin.Invoice`: The Invoice object containing all</span>
<span class="sd">            details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;INVOICE&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">groupId</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">invId</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">InvoiceSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.download_invoice"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.download_invoice">[docs]</a>    <span class="k">def</span> <span class="nf">download_invoice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads and opens an invoice as a pdf document.</span>

<span class="sd">        Args:</span>
<span class="sd">            id_ (int): Id of the invoice (not the regular invoice number)</span>
<span class="sd">            **kwargs: See :meth:`~pynami.util.open_download_pdf`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;INVOICE_PDF&#39;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">id_</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">open_download_pdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.tk_auf_grp"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.tk_auf_grp">[docs]</a>    <span class="k">def</span> <span class="nf">tk_auf_grp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all possible activities for a certain group</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`): Member id (not the |DPSG|</span>
<span class="sd">                    Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.default.Baseadmin`: List of possible</span>
<span class="sd">            activities</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;TK_AUF_GRP&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.tk_grp"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.tk_grp">[docs]</a>    <span class="k">def</span> <span class="nf">tk_grp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all possible groups for an activity</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`): Member id (not the |DPSG|</span>
<span class="sd">                    Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.default.Baseadmin`: List of possible</span>
<span class="sd">            groups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;TK_GRP&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.tk_ug"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.tk_ug">[docs]</a>    <span class="k">def</span> <span class="nf">tk_ug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">taetigkeitId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all possible subdivision for an activity</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`): Member id (not the |DPSG|</span>
<span class="sd">                    Mitgliedsnummer)</span>
<span class="sd">            taetigkeitId (int): Id of the activity. A list of all possible ids</span>
<span class="sd">                can be found in the section</span>
<span class="sd">                :ref:`tables/activitytypes:Activity types`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.default.Baseadmin`: List of possible</span>
<span class="sd">            subdivision</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;TK_UG&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">taetigkeitId</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.tk_caea_grp"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.tk_caea_grp">[docs]</a>    <span class="k">def</span> <span class="nf">tk_caea_grp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">taetigkeitId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all possible access rights for an activity</span>

<span class="sd">        Args:</span>
<span class="sd">            grpId (:obj:`int` or :obj:`str`): Group id</span>
<span class="sd">            mglId (:obj:`int` or :obj:`str`): Member id (not the |DPSG|</span>
<span class="sd">                    Mitgliedsnummer)</span>
<span class="sd">            taetigkeitId (int): Id of the activity. A list of all possible ids</span>
<span class="sd">                can be found in the section</span>
<span class="sd">                :ref:`tables/activitytypes:Activity types`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.default.Baseadmin`: List of possible</span>
<span class="sd">            access rights</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_baseadmin</span><span class="p">(</span><span class="s1">&#39;TK_CAEA_GRP&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">taetigkeitId</span><span class="p">,</span>
                                   <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.mgl_activities"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.mgl_activities">[docs]</a>    <span class="k">def</span> <span class="nf">mgl_activities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mgl</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of all activities of a member</span>

<span class="sd">        Args:</span>
<span class="sd">            mgl (int): Member id (not |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.activity.Activity`: All activities of</span>
<span class="sd">            the member (even those which have already ended)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;MGL_TAETIGKEITEN&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mgl</span><span class="si">}</span><span class="s2">/flist&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchActivitySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.get_activity"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.get_activity">[docs]</a>    <span class="k">def</span> <span class="nf">get_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mgl</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an activity by its id.</span>

<span class="sd">        Args:</span>
<span class="sd">            mgl (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            id_ (int): Id of the activity. This will probably originate from an</span>
<span class="sd">                activity search result, e.g. by calling :meth:`mgl_activities`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.activity.Activity`: The Activity object containing all</span>
<span class="sd">            details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;MGL_TAETIGKEITEN&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mgl</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ActivitySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.update_activity"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.update_activity">[docs]</a>    <span class="k">def</span> <span class="nf">update_activity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mgl</span><span class="p">,</span> <span class="n">act</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update an activity</span>

<span class="sd">        Args:</span>
<span class="sd">            mgl (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            act (:class:`~.activity.Activity`): Updated data set. The activity</span>
<span class="sd">                id is taken form this data set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.activity.Activity`: A new updated object</span>

<span class="sd">        Warning:</span>
<span class="sd">            This has not been tested yet!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;MGL_TAETIGKEITEN&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mgl</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">act</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">userjson</span> <span class="o">=</span> <span class="n">ActivitySchema</span><span class="p">()</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">act</span><span class="p">)</span>
        <span class="c1"># print(userjson)</span>
        <span class="c1"># req = requests.Request(&#39;PUT&#39;, url,</span>
        <span class="c1">#                        json=userjson)</span>
        <span class="c1"># prereq = self.s.prepare_request(req)</span>
        <span class="c1"># print(prereq.body)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">userjson</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ActivitySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.mgl_ausbildungen"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.mgl_ausbildungen">[docs]</a>    <span class="k">def</span> <span class="nf">mgl_ausbildungen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all trainings from a Mitglied.</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.training.SearchAusbildung`: All trainings</span>
<span class="sd">            of the member</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;AUSBILDUNG&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mglId</span><span class="si">}</span><span class="s2">/flist&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchAusbildungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.get_ausbildung"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.get_ausbildung">[docs]</a>    <span class="k">def</span> <span class="nf">get_ausbildung</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a training by its id.</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            id_ (int): Id of the training. This will probably originate from an</span>
<span class="sd">                training search result, e.g. by calling</span>
<span class="sd">                :meth:`mgl_ausbildungen`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.training.Ausbildung`: The Ausbildung object containing</span>
<span class="sd">            all details about the training.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;AUSBILDUNG&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mglId</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">AusbildungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.update_ausbildung"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.update_ausbildung">[docs]</a>    <span class="k">def</span> <span class="nf">update_ausbildung</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">ausbildung</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update a training</span>

<span class="sd">        Args:</span>
<span class="sd">            mgl (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            ausbildung (:class:`~.training.Ausbildung`): Updated data set. The</span>
<span class="sd">                training id is taken form this data set.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.training.Ausbildung`: A new updated object</span>

<span class="sd">        Warning:</span>
<span class="sd">            This has not been tested yet!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;AUSBILDUNG&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">mglId</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">ausbildung</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">AusbildungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">ausbildung</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">AusbildungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.mgl_history"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.mgl_history">[docs]</a>    <span class="k">def</span> <span class="nf">mgl_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all history changes from a Mitglied.</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            ext (:obj:`bool`, optional): If the extended history format should</span>
<span class="sd">                be used. Defaults to :data:`True`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.history.HistoryEntry`: All history entries</span>
<span class="sd">            of the member</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;MGL_HISTORY_EXT&#39;</span> <span class="k">if</span> <span class="n">ext</span> <span class="k">else</span> <span class="s1">&#39;MGL_HISTORY&#39;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}{</span><span class="n">mglId</span><span class="si">}</span><span class="s2">/flist&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HistoryEntrySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.get_mgl_history"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.get_mgl_history">[docs]</a>    <span class="k">def</span> <span class="nf">get_mgl_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a member history entry by its id.</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            id_ (int): Id of the entry. May originate from a search result,</span>
<span class="sd">                e.g. by calling :meth:`mgl_history`.</span>
<span class="sd">            ext (:obj:`bool`, optional): If the extended history format should</span>
<span class="sd">                be used. Defaults to :data:`True`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.history.MitgliedHistory`: The object containing all vital</span>
<span class="sd">            information about this history entry.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;MGL_HISTORY_EXT&#39;</span> <span class="k">if</span> <span class="n">ext</span> <span class="k">else</span> <span class="s1">&#39;MGL_HISTORY&#39;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}{</span><span class="n">mglId</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">MitgliedHistorySchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.tags"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.tags">[docs]</a>    <span class="k">def</span> <span class="nf">tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all tags of a member</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.tags.SearchTag`: List of the search</span>
<span class="sd">            results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;TAGS&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mglId</span><span class="o">=</span><span class="n">mglId</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchTagSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.get_tag"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.get_tag">[docs]</a>    <span class="k">def</span> <span class="nf">get_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="p">,</span> <span class="n">tagId</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a tag by its id</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (int): Member id (not |DPSG| Mitgliedsnummer)</span>
<span class="sd">            tagId(int): Tag id</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.tags.Tag`: The tag object with all important details</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;GET_TAG&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mglId</span><span class="o">=</span><span class="n">mglId</span><span class="p">,</span> <span class="n">tagId</span><span class="o">=</span><span class="n">tagId</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TagSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)))</span></div>

<div class="viewcode-block" id="NaMi.bescheinigungen"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.bescheinigungen">[docs]</a>    <span class="k">def</span> <span class="nf">bescheinigungen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all certificates of inspection</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.schemas.cogc.SearchBescheinigung`: A list</span>
<span class="sd">            of all your certificates of inspection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;FZ&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">flist&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchBescheinigungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.get_bescheinigung"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.get_bescheinigung">[docs]</a>    <span class="k">def</span> <span class="nf">get_bescheinigung</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        View a certificate of inspection by its id</span>

<span class="sd">        Args:</span>
<span class="sd">            id_ (int): The internal id of the certificate</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.schemas.cogc.Bescheinigung`: An object holding all</span>
<span class="sd">            important details about the inspection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;FZ&#39;</span><span class="p">]</span><span class="si">}{</span><span class="n">id_</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">BescheinigungSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div>

<div class="viewcode-block" id="NaMi.download_bescheinigung"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.download_bescheinigung">[docs]</a>    <span class="k">def</span> <span class="nf">download_bescheinigung</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a certificate as a |PDF| file</span>

<span class="sd">        Args:</span>
<span class="sd">            id_ (int): Internal id of the certificate</span>
<span class="sd">            **kwargs: See :meth:`~pynami.util.open_download_pdf`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;FZ&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">download-pdf-eigene-bescheinigung&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">id_</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">open_download_pdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.download_beantragung"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.download_beantragung">[docs]</a>    <span class="k">def</span> <span class="nf">download_beantragung</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open the application form for a certificate of good conduct as a |PDF|</span>
<span class="sd">        file.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: See :meth:`~pynami.util.open_download_pdf`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;BEANTRAGUNG&#39;</span><span class="p">]</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">open_download_pdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.search_all"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.search_all">[docs]</a>    <span class="k">def</span> <span class="nf">search_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">filterString</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">searchString</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
                   <span class="n">sortproperty</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortdirection</span><span class="o">=</span><span class="s1">&#39;ASC&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Search function for filtering the whole member list with limited</span>
<span class="sd">        filter options.</span>

<span class="sd">        It is also possible to sort the results.</span>

<span class="sd">        Args:</span>
<span class="sd">            filterString (:obj:`str`, optional): Filter attribute.</span>
<span class="sd">            searchString (:obj:`str`, optional): You can search within the</span>
<span class="sd">                chosen filter attribute. The Format must match the type of the</span>
<span class="sd">                filter attribute.</span>
<span class="sd">            sortproperty (:obj:`str`, optional): Attribute by wich the results</span>
<span class="sd">                shall be sorted.</span>
<span class="sd">            sortdirection (:obj:`str`, optional): Direction of sorting. Can</span>
<span class="sd">                take the values ``ASC`` (wich is the default) and ``DESC``.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.mgl.SearchMitglied`: The search</span>
<span class="sd">            results</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="n">sortdirection</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;ASC&#39;</span><span class="p">,</span> <span class="s1">&#39;DESC&#39;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="k">if</span> <span class="n">sortproperty</span><span class="p">:</span>
            <span class="n">keys</span> <span class="o">=</span> <span class="n">SearchMitgliedSchema</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;_declared_fields&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">assert</span> <span class="n">sortproperty</span> <span class="ow">in</span> <span class="n">keys</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;sort&#39;</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([{</span><span class="s1">&#39;property&#39;</span><span class="p">:</span> <span class="n">sortproperty</span><span class="p">,</span>
                                                <span class="s1">&#39;direction&#39;</span><span class="p">:</span> <span class="n">sortdirection</span><span class="p">}],</span>
                                              <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">))})</span>
        <span class="k">if</span> <span class="n">grpId</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">grpId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">]</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;SEARCH_ALL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gruppierung</span><span class="o">=</span><span class="n">grpId</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filterString</span><span class="p">:</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;filterString&#39;</span><span class="p">:</span> <span class="n">filterString</span><span class="p">,</span>
                           <span class="s1">&#39;searchString&#39;</span><span class="p">:</span> <span class="n">searchString</span><span class="p">})</span>
        <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchMitgliedSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.search"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.search">[docs]</a>    <span class="k">def</span> <span class="nf">search</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Run a search for members</span>

<span class="sd">        Todo:</span>
<span class="sd">            * Check search terms and formatting. Also some search keys can only</span>
<span class="sd">              be used mutually exclusive.</span>

<span class="sd">        Args:</span>
<span class="sd">            **kwargs: Search keys and words. Be advised that some search words</span>
<span class="sd">                must  have a certain formatting or can only take a limited</span>
<span class="sd">                amount of values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`list` of :class:`~.mgl.SearchMitglied`: The search</span>
<span class="sd">            results</span>

<span class="sd">        See also:</span>
<span class="sd">            :class:`~.search.SearchSchema` for a complete list of search</span>
<span class="sd">            keys</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># this is just a default search</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({})</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">DEFAULT_PARAMS</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;searchedValues&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SearchSchema</span><span class="p">()</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span>
                                                        <span class="n">separators</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;SEARCH&#39;</span><span class="p">],</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">SearchMitgliedSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">),</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaMi.mitglied"><a class="viewcode-back" href="../../pynami.html#pynami.nami.NaMi.mitglied">[docs]</a>    <span class="k">def</span> <span class="nf">mitglied</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mglId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;GET&#39;</span><span class="p">,</span> <span class="n">grpId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets or updates a Mitglied.</span>

<span class="sd">        The keyword arguments are passed on to the |HTTP| communication</span>

<span class="sd">        Args:</span>
<span class="sd">            mglId (:obj:`int`, optional): ID of the Mitglied. This is not the</span>
<span class="sd">                |DPSG| Mitgliedsnummer. Defaults to the user.</span>
<span class="sd">            method (:obj:`str`): |HTTP| Method. Should be ``&#39;GET&#39;`` or</span>
<span class="sd">                ``&#39;PUT&#39;``, defaults to ``&#39;GET&#39;``.</span>
<span class="sd">            grpId (:obj:`int`, optional): The |DPSG| Stammesnummer,</span>
<span class="sd">                e.g. ``131913``. The default (:data:`None`) takes the value</span>
<span class="sd">                from the internal attribute :attr:`__config`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            :class:`~.mgl.Mitglied`: The retrieved or respectively updated</span>
<span class="sd">            Mitglied. Note that the</span>
<span class="sd">            :attr:`~.mgl.MitgliedSchema.austrittsDatum` attribute is not part</span>
<span class="sd">            of the returned data set.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mglId</span><span class="p">:</span>
            <span class="n">mglId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">grpId</span><span class="p">:</span>
            <span class="n">grpId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__config</span><span class="p">[</span><span class="s1">&#39;stammesnummer&#39;</span><span class="p">]</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">URLS</span><span class="p">[</span><span class="s1">&#39;GETMGL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gruppierung</span><span class="o">=</span><span class="n">grpId</span><span class="p">,</span> <span class="n">mitglied</span><span class="o">=</span><span class="n">mglId</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">MitgliedSchema</span><span class="p">()</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_check_response</span><span class="p">(</span><span class="n">r</span><span class="p">))</span></div></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">os</span>
    <span class="kn">from</span> <span class="nn">configparser</span> <span class="kn">import</span> <span class="n">ConfigParser</span>
    <span class="c1"># import cProfile, pstats, io</span>
    <span class="c1"># pr = cProfile.Profile(builtins=False, subcalls=False)</span>
    <span class="c1"># from .tools import make_csv, send_emails</span>
    <span class="c1"># import logging</span>
    <span class="c1"># import http.client</span>

    <span class="c1"># http.client.HTTPConnection.debuglevel = 1</span>
    <span class="c1"># logging.basicConfig(level=logging.DEBUG)</span>
    <span class="c1"># requests_log = logging.getLogger(&quot;requests.packages.urllib3&quot;)</span>
    <span class="c1"># requests_log.setLevel(logging.DEBUG)</span>
    <span class="c1"># requests_log.propagate = True</span>

    <span class="n">search</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;mglStatusId&#39;</span><span class="p">:</span> <span class="s1">&#39;AKTIV&#39;</span><span class="p">,</span>
        <span class="s1">&#39;mglTypeId&#39;</span><span class="p">:</span> <span class="s1">&#39;MITGLIED&#39;</span><span class="p">,</span>
        <span class="s1">&#39;untergliederungId&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="s1">&#39;taetigkeitId&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span>
                             <span class="s1">&#39;.pynami.conf&#39;</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">NaMi</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;nami&#39;</span><span class="p">]))</span> <span class="k">as</span> <span class="n">nami</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">code</span>
        <span class="n">code</span><span class="o">.</span><span class="n">interact</span><span class="p">(</span><span class="n">local</span><span class="o">=</span><span class="nb">locals</span><span class="p">())</span>
        <span class="c1"># pr.enable()</span>
        <span class="c1"># print(tabulate2x(nami.search(**search)))</span>
        <span class="c1"># print(tabulate2x(nami.search()))</span>
        <span class="c1"># for mitglied in nami.search():</span>
        <span class="c1">#     print(nami.mitglied(mitglied.id))</span>
        <span class="c1"># print(send_emails(nami.search(**search), open_browser=False))</span>
        <span class="c1"># user = nami.mitglied()</span>
        <span class="c1"># print(user.id)</span>

        <span class="c1"># print(user.data[&#39;kontoverbindung&#39;])</span>
        <span class="c1"># user.data[&#39;spitzname&#39;] = &#39;Chuck Norris&#39;</span>
        <span class="c1"># user.update(nami)</span>

        <span class="c1"># print(tabulate2x(nami.tags(user.id)))</span>
        <span class="c1"># print(nami.get_tag(user.id, nami.tags(user.id)[0].id))</span>
        <span class="c1"># print(tabulate2x(nami.tk_auf_grp(100103, user.id)))</span>
        <span class="c1"># print(tabulate2x(nami.tk_grp(100103, user.id)))</span>
        <span class="c1"># print(tabulate2x(nami.tk_ug(100103, user.id, 6)))</span>
        <span class="c1"># print(tabulate2x(nami.tk_caea_grp(100103, user.id, 6)))</span>
        <span class="c1"># nami.download_beantragung()</span>
        <span class="c1"># print(nami.bescheinigungen())</span>
        <span class="c1"># print(nami.get_bescheinigung(nami.bescheinigungen()[0].id))</span>
        <span class="c1"># nami.download_bescheinigung(nami.bescheinigungen()[0].id)</span>
        <span class="c1"># print(tabulate2x(nami.gruppierungen))</span>
        <span class="c1"># print(tabulate2x(nami.grpadmin_grps))</span>
        <span class="c1"># print(nami.invoices())</span>
        <span class="c1"># print(nami.invoice(100103, nami.invoices()[0].id))</span>
        <span class="c1"># nami.download_invoice(nami.invoices()[0].id)</span>
        <span class="c1"># print(nami.mgl_history(user.id))</span>
        <span class="c1"># print(nami.get_mgl_history(user.id, nami.mgl_history(user.id)[0].id))</span>
        <span class="c1"># print(tabulate2x(nami.mgl_ausbildungen(user.id)))</span>
        <span class="c1"># print([nami.get_ausbildung(user.id, x.id)</span>
        <span class="c1">#       for x in nami.mgl_ausbildungen(user.id)])</span>
        <span class="c1"># print(tabulate2x(nami.mgl_activities(user.id)))</span>
        <span class="c1"># act = nami.get_activity(user.id, nami.mgl_activities(user.id)[0].id)</span>
        <span class="c1"># print(act)</span>
        <span class="c1"># nami.update_activity(user.id, act)</span>
        <span class="c1"># print(MitgliedSchema().dumps(user.data, separators=(&#39;,&#39;, &#39;:&#39;)))</span>
        <span class="c1"># user.update(nami)</span>

        <span class="c1"># print(tabulate2x(nami.countries()))</span>
        <span class="c1"># print(tabulate2x(nami.regionen()))</span>
        <span class="c1"># print(tabulate2x(nami.zahlungskonditionen()))</span>
        <span class="c1"># print(tabulate2x(nami.beitragsarten()))</span>
        <span class="c1"># print(tabulate2x(nami.beitragsarten_mgl()))</span>
        <span class="c1"># print(tabulate2x(nami.geschlechter()))</span>
        <span class="c1"># print(tabulate2x(nami.staaten()))</span>
        <span class="c1"># print(tabulate2x(nami.konfessionen()))</span>
        <span class="c1"># print(tabulate2x(nami.mgltypes()))</span>
        <span class="c1"># print(tabulate2x(nami.search_all(filterString=&#39;vorname&#39;,</span>
        <span class="c1">#                                 searchString=&#39;Sebastian&#39;,</span>
        <span class="c1">#                                 sortproperty=&#39;entries_nachname&#39;)))</span>
        <span class="c1"># print(nami.history(filterString=&#39;interval&#39;, searchString=&#39;4&#39;))</span>
        <span class="c1"># print(tabulate2x(nami.notifications(filterString=&#39;interval&#39;,</span>
        <span class="c1">#                                     searchString=&#39;4&#39;)))</span>
        <span class="c1"># print(nami.stats.statsCategories)</span>
        <span class="c1"># print(nami.status_list)</span>
        <span class="c1"># print(nami.tagList)</span>
        <span class="c1"># print(nami.bausteine)</span>
        <span class="c1"># print(nami.subdivision)</span>
        <span class="c1"># print(tabulate2x(nami.activities))</span>
        <span class="c1"># print(tabulate2x(nami.ebenen))</span>
        <span class="c1"># print(tabulate2x(nami.ebene1))</span>
        <span class="c1"># print(tabulate2x(nami.ebene2(nami.ebene1[0].id)))</span>
        <span class="c1"># print(tabulate2x(nami.ebene3(nami.ebene2(nami.ebene1[0].id)[0].id)))</span>
        <span class="c1"># print(make_csv(nami.ebenen))</span>
        <span class="c1"># pr.disable()</span>
        <span class="c1"># pr.print_stats(&#39;cumulative&#39;)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Sebastian Scholz.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>